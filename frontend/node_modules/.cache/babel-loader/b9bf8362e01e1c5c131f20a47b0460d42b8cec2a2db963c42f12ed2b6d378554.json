{"ast":null,"code":"var _jsxFileName = \"/Users/maximiliandazer/Process Control chart/Process-Control-chart/frontend/src/components/data/FileUpload.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Box, Button, Typography, Alert, LinearProgress, FormControl, InputLabel, Select, MenuItem, Chip, Stack } from '@mui/material';\nimport { CloudUpload, Assessment } from '@mui/icons-material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileUpload = ({\n  onDataChange,\n  metricType = 'cycle_time'\n}) => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [selectedMetricType, setSelectedMetricType] = useState('cycle_time');\n  const parseNaveCSV = async file => {\n    const text = await file.text();\n    const lines = text.split('\\n').filter(line => line.trim());\n    if (lines.length < 2) {\n      throw new Error('CSV file must contain at least a header row and one data row');\n    }\n\n    // Parse header to find relevant columns\n    const headers = lines[0].split(',').map(h => h.trim().toLowerCase());\n\n    // Map Nave column names to our expected fields\n    const columnMap = {\n      taskKey: headers.findIndex(h => h.includes('task key') || h.includes('id')),\n      taskName: headers.findIndex(h => h.includes('task name') || h.includes('name')),\n      startDate: headers.findIndex(h => h.includes('start date')),\n      endDate: headers.findIndex(h => h.includes('end date')),\n      status: headers.findIndex(h => h.includes('status')),\n      resolution: headers.findIndex(h => h.includes('resolution')),\n      // Add resolution column\n      // Nave provides detailed time tracking in minutes\n      backlogTime: headers.findIndex(h => h.includes('backlog (mins)')),\n      inProcessTime: headers.findIndex(h => h.includes('in process (mins)')),\n      totalTime: headers.findIndex(h => h.includes('total (mins)'))\n    };\n\n    // Validate required columns exist\n    if (columnMap.startDate === -1 || columnMap.endDate === -1) {\n      throw new Error('CSV must contain \"Start date\" and \"End date\" columns for flow metrics analysis');\n    }\n    const data = [];\n    const completedTasks = [];\n    let filteredOutCount = 0;\n    for (let i = 1; i < lines.length; i++) {\n      var _columns$columnMap$st, _columns$columnMap$re;\n      const columns = lines[i].split(',').map(c => c.trim().replace(/\"/g, ''));\n      if (columns.length < Math.max(...Object.values(columnMap).filter(v => v !== -1))) {\n        continue; // Skip incomplete rows\n      }\n      const taskKey = columns[columnMap.taskKey] || `Task-${i}`;\n      const taskName = columns[columnMap.taskName] || 'Unnamed Task';\n      const startDateStr = columns[columnMap.startDate];\n      const endDateStr = columns[columnMap.endDate];\n      const status = (_columns$columnMap$st = columns[columnMap.status]) === null || _columns$columnMap$st === void 0 ? void 0 : _columns$columnMap$st.toLowerCase();\n      const resolution = (_columns$columnMap$re = columns[columnMap.resolution]) === null || _columns$columnMap$re === void 0 ? void 0 : _columns$columnMap$re.toLowerCase();\n\n      // Enhanced filtering based on your requirements\n      // 1. Exclude items with \"Won't fix\" status\n      if (status !== null && status !== void 0 && status.includes(\"won't fix\") || status !== null && status !== void 0 && status.includes(\"wont fix\")) {\n        filteredOutCount++;\n        continue;\n      }\n\n      // 2. Only include items with \"Done\" resolution\n      if (columnMap.resolution !== -1 && resolution && !resolution.includes('done')) {\n        filteredOutCount++;\n        continue;\n      }\n\n      // 3. Fallback to status check if no resolution column\n      if (columnMap.resolution === -1 && !(status !== null && status !== void 0 && status.includes('done')) && !(status !== null && status !== void 0 && status.includes('completed'))) {\n        filteredOutCount++;\n        continue;\n      }\n      if (!startDateStr || !endDateStr || endDateStr.toLowerCase().includes('backlog')) {\n        filteredOutCount++;\n        continue; // Skip tasks without completion dates\n      }\n      try {\n        const startDate = new Date(startDateStr);\n        const endDate = new Date(endDateStr);\n        if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {\n          filteredOutCount++;\n          continue; // Skip invalid dates\n        }\n        let value = 0; // Initialize value to avoid unassigned usage\n\n        if (metricType === 'cycle_time') {\n          // Calculate Cycle Time in days (as recommended in Vacanti's document)\n          const cycleTimeMs = endDate.getTime() - startDate.getTime();\n          value = cycleTimeMs / (1000 * 60 * 60 * 24); // Convert to days\n\n          // Enhanced label with task key and name for tooltips\n          const enhancedLabel = `${taskKey}: ${taskName} (${value.toFixed(1)} days)`;\n\n          // Use end date as the timestamp for when the measurement was taken\n          // Multiple items can complete on the same day - this is normal and allowed per Vacanti\n          data.push({\n            timestamp: endDate,\n            value: Math.round(value * 100) / 100,\n            // Round to 2 decimal places\n            label: enhancedLabel,\n            // Add custom properties for tooltip enhancement\n            taskKey: taskKey,\n            taskName: taskName,\n            cycleTimeDays: value\n          });\n        } else {\n          // For throughput analysis, we'll count items completed per week\n          // This will be processed differently in a separate function\n        }\n        completedTasks.push({\n          taskKey,\n          taskName,\n          startDate,\n          endDate,\n          cycleTime: value,\n          status,\n          resolution\n        });\n      } catch (error) {\n        console.warn(`Skipping row ${i} due to date parsing error:`, error);\n        filteredOutCount++;\n        continue;\n      }\n    }\n    if (data.length === 0) {\n      throw new Error('No completed tasks found that meet the criteria. PBC analysis requires completed work items (Done status/resolution) with start and end dates.');\n    }\n\n    // Sort by completion date for proper time series analysis (Vacanti's requirement)\n    data.sort((a, b) => a.timestamp.getTime() - b.timestamp.getTime());\n\n    // Calculate statistics including duplicate timestamps (which are allowed per Vacanti)\n    const cycleTimeValues = data.map(d => d.value);\n    const avgCycleTime = cycleTimeValues.reduce((sum, val) => sum + val, 0) / cycleTimeValues.length;\n\n    // Count duplicate timestamps (for informational purposes)\n    const timestamps = data.map(d => d.timestamp.getTime());\n    const uniqueTimestamps = new Set(timestamps);\n    const duplicateTimestamps = timestamps.length - uniqueTimestamps.size;\n    setPreview({\n      totalTasks: completedTasks.length + filteredOutCount,\n      completedTasks: completedTasks.length,\n      filteredOutTasks: filteredOutCount,\n      dateRange: {\n        start: new Date(Math.min(...data.map(d => d.timestamp.getTime()))),\n        end: new Date(Math.max(...data.map(d => d.timestamp.getTime())))\n      },\n      avgCycleTime,\n      duplicateTimestamps\n    });\n    return data;\n  };\n  const handleFileUpload = async event => {\n    var _event$target$files;\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (!file) return;\n    setLoading(true);\n    setError(null);\n    setPreview(null);\n    try {\n      // Validate file type\n      if (!file.name.toLowerCase().endsWith('.csv')) {\n        throw new Error('Please upload a CSV file');\n      }\n\n      // Validate file size (32MB limit as per Nave documentation)\n      if (file.size > 32 * 1024 * 1024) {\n        throw new Error('File size exceeds 32MB limit');\n      }\n      const pbcData = await parseNaveCSV(file);\n\n      // Validate minimum data points for meaningful PBC analysis\n      if (pbcData.length < 6) {\n        throw new Error(`Only ${pbcData.length} completed tasks found that meet the criteria. Minimum 6 data points required for meaningful Process Behaviour Chart analysis as per Vacanti's methodology.`);\n      }\n      onDataChange(pbcData);\n    } catch (err) {\n      setError(err.message || 'Failed to parse Nave CSV file');\n      setPreview(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      children: \"Upload Nave CSV File\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      sx: {\n        mb: 2\n      },\n      children: \"Upload a CSV file exported from Nave to analyze your flow metrics using Process Behaviour Charts. Only completed tasks (Done status/resolution) will be included, excluding \\\"Won't fix\\\" items.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      fullWidth: true,\n      sx: {\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        children: \"Flow Metric to Analyze\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        value: selectedMetricType,\n        onChange: e => setSelectedMetricType(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          value: \"cycle_time\",\n          children: \"Cycle Time (Days) - Time from start to completion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: \"throughput\",\n          children: \"Throughput (Items/Week) - Items completed per time period\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outlined\",\n      component: \"label\",\n      startIcon: /*#__PURE__*/_jsxDEV(CloudUpload, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 20\n      }, this),\n      disabled: loading,\n      fullWidth: true,\n      sx: {\n        mb: 2\n      },\n      children: [\"Choose Nave CSV File\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv,text/csv,application/csv\",\n        hidden: true,\n        onChange: handleFileUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          mt: 1\n        },\n        children: \"Processing Nave data for flow metrics analysis...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle2\",\n        gutterBottom: true,\n        children: \"Upload Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this), error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }, this), preview && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"success\",\n      sx: {\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle2\",\n        gutterBottom: true,\n        children: [/*#__PURE__*/_jsxDEV(Assessment, {\n          sx: {\n            mr: 1,\n            verticalAlign: 'middle'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this), \"Nave Data Successfully Processed\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        spacing: 1,\n        sx: {\n          mb: 1,\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Chip, {\n          label: `${preview.completedTasks} completed tasks included`,\n          size: \"small\",\n          color: \"success\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n          label: `${preview.filteredOutTasks} tasks filtered out`,\n          size: \"small\",\n          color: \"info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n          label: `Avg ${metricType === 'cycle_time' ? 'Cycle Time' : 'Throughput'}: ${preview.avgCycleTime.toFixed(1)} ${metricType === 'cycle_time' ? 'days' : 'items/week'}`,\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this), preview.duplicateTimestamps > 0 && /*#__PURE__*/_jsxDEV(Chip, {\n          label: `${preview.duplicateTimestamps} items completed on same day`,\n          size: \"small\",\n          color: \"info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        children: [\"Date range: \", preview.dateRange.start.toLocaleDateString(), \" to \", preview.dateRange.end.toLocaleDateString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          mt: 1\n        },\n        children: \"Ready for Process Behaviour Chart analysis. Data is chronologically ordered and meets Vacanti's requirements for meaningful XmR chart analysis.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          mt: 1,\n          fontStyle: 'italic'\n        },\n        children: \"Filtered out: \\\"Won't fix\\\" status and non-\\\"Done\\\" resolutions as per your requirements.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 2,\n        p: 2,\n        bgcolor: 'grey.50',\n        borderRadius: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle2\",\n        gutterBottom: true,\n        children: \"Filtering Rules Applied:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        component: \"ul\",\n        sx: {\n          pl: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2705 Include: Tasks with \\\"Done\\\" status or \\\"Done\\\" resolution\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u274C Exclude: Tasks with \\\"Won't fix\\\" status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u274C Exclude: Tasks with non-\\\"Done\\\" resolutions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u274C Exclude: Tasks without completion dates\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\uD83D\\uDCCA Result: Only completed work items for accurate flow metrics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\uD83C\\uDFAF Hover over chart points to see Task Key and Task Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 5\n  }, this);\n};\n_s(FileUpload, \"FYIYj1MjRdFg5jBbfwcaEay+pPE=\");\n_c = FileUpload;\nexport default FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","useState","Box","Button","Typography","Alert","LinearProgress","FormControl","InputLabel","Select","MenuItem","Chip","Stack","CloudUpload","Assessment","jsxDEV","_jsxDEV","FileUpload","onDataChange","metricType","_s","loading","setLoading","error","setError","preview","setPreview","selectedMetricType","setSelectedMetricType","parseNaveCSV","file","text","lines","split","filter","line","trim","length","Error","headers","map","h","toLowerCase","columnMap","taskKey","findIndex","includes","taskName","startDate","endDate","status","resolution","backlogTime","inProcessTime","totalTime","data","completedTasks","filteredOutCount","i","_columns$columnMap$st","_columns$columnMap$re","columns","c","replace","Math","max","Object","values","v","startDateStr","endDateStr","Date","isNaN","getTime","value","cycleTimeMs","enhancedLabel","toFixed","push","timestamp","round","label","cycleTimeDays","cycleTime","console","warn","sort","a","b","cycleTimeValues","d","avgCycleTime","reduce","sum","val","timestamps","uniqueTimestamps","Set","duplicateTimestamps","size","totalTasks","filteredOutTasks","dateRange","start","min","end","handleFileUpload","event","_event$target$files","target","files","name","endsWith","pbcData","err","message","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","sx","mb","fullWidth","onChange","e","component","startIcon","disabled","type","accept","hidden","mt","severity","mr","verticalAlign","direction","spacing","flexWrap","toLocaleDateString","fontStyle","p","bgcolor","borderRadius","pl","_c","$RefreshReg$"],"sources":["/Users/maximiliandazer/Process Control chart/Process-Control-chart/frontend/src/components/data/FileUpload.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Box,\n  Button,\n  Typography,\n  Alert,\n  LinearProgress,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Chip,\n  Stack\n} from '@mui/material';\nimport { CloudUpload, Assessment } from '@mui/icons-material';\nimport { DataPoint } from '../../types';\n\ninterface FileUploadProps {\n  onDataChange: (data: DataPoint[]) => void;\n  metricType?: 'cycle_time' | 'throughput';\n}\n\nconst FileUpload: React.FC<FileUploadProps> = ({ onDataChange, metricType = 'cycle_time' }) => {\n\ninterface NaveDataPreview {\n  totalTasks: number;\n  completedTasks: number;\n  filteredOutTasks: number;\n  dateRange: { start: Date; end: Date };\n  avgCycleTime: number;\n  duplicateTimestamps: number;\n}\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [preview, setPreview] = useState<NaveDataPreview | null>(null);\n  const [selectedMetricType, setSelectedMetricType] = useState<'cycle_time' | 'throughput'>('cycle_time');\n\n  const parseNaveCSV = async (file: File): Promise<DataPoint[]> => {\n    const text = await file.text();\n    const lines = text.split('\\n').filter(line => line.trim());\n    \n    if (lines.length < 2) {\n      throw new Error('CSV file must contain at least a header row and one data row');\n    }\n\n    // Parse header to find relevant columns\n    const headers = lines[0].split(',').map(h => h.trim().toLowerCase());\n    \n    // Map Nave column names to our expected fields\n    const columnMap = {\n      taskKey: headers.findIndex(h => h.includes('task key') || h.includes('id')),\n      taskName: headers.findIndex(h => h.includes('task name') || h.includes('name')),\n      startDate: headers.findIndex(h => h.includes('start date')),\n      endDate: headers.findIndex(h => h.includes('end date')),\n      status: headers.findIndex(h => h.includes('status')),\n      resolution: headers.findIndex(h => h.includes('resolution')), // Add resolution column\n      // Nave provides detailed time tracking in minutes\n      backlogTime: headers.findIndex(h => h.includes('backlog (mins)')),\n      inProcessTime: headers.findIndex(h => h.includes('in process (mins)')),\n      totalTime: headers.findIndex(h => h.includes('total (mins)'))\n    };\n\n    // Validate required columns exist\n    if (columnMap.startDate === -1 || columnMap.endDate === -1) {\n      throw new Error('CSV must contain \"Start date\" and \"End date\" columns for flow metrics analysis');\n    }\n\n    const data: DataPoint[] = [];\n    const completedTasks: any[] = [];\n    let filteredOutCount = 0;\n    \n    for (let i = 1; i < lines.length; i++) {\n      const columns = lines[i].split(',').map(c => c.trim().replace(/\"/g, ''));\n      \n      if (columns.length < Math.max(...Object.values(columnMap).filter(v => v !== -1))) {\n        continue; // Skip incomplete rows\n      }\n\n      const taskKey = columns[columnMap.taskKey] || `Task-${i}`;\n      const taskName = columns[columnMap.taskName] || 'Unnamed Task';\n      const startDateStr = columns[columnMap.startDate];\n      const endDateStr = columns[columnMap.endDate];\n      const status = columns[columnMap.status]?.toLowerCase();\n      const resolution = columns[columnMap.resolution]?.toLowerCase();\n      \n      // Enhanced filtering based on your requirements\n      // 1. Exclude items with \"Won't fix\" status\n      if (status?.includes(\"won't fix\") || status?.includes(\"wont fix\")) {\n        filteredOutCount++;\n        continue;\n      }\n      \n      // 2. Only include items with \"Done\" resolution\n      if (columnMap.resolution !== -1 && resolution && !resolution.includes('done')) {\n        filteredOutCount++;\n        continue;\n      }\n      \n      // 3. Fallback to status check if no resolution column\n      if (columnMap.resolution === -1 && !status?.includes('done') && !status?.includes('completed')) {\n        filteredOutCount++;\n        continue;\n      }\n\n      if (!startDateStr || !endDateStr || endDateStr.toLowerCase().includes('backlog')) {\n        filteredOutCount++;\n        continue; // Skip tasks without completion dates\n      }\n\n      try {\n        const startDate = new Date(startDateStr);\n        const endDate = new Date(endDateStr);\n        \n        if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {\n          filteredOutCount++;\n          continue; // Skip invalid dates\n        }\n\n        let value: number = 0; // Initialize value to avoid unassigned usage\n        \n        if (metricType === 'cycle_time') {\n          // Calculate Cycle Time in days (as recommended in Vacanti's document)\n          const cycleTimeMs = endDate.getTime() - startDate.getTime();\n          value = cycleTimeMs / (1000 * 60 * 60 * 24); // Convert to days\n          \n          // Enhanced label with task key and name for tooltips\n          const enhancedLabel = `${taskKey}: ${taskName} (${value.toFixed(1)} days)`;\n          \n          // Use end date as the timestamp for when the measurement was taken\n          // Multiple items can complete on the same day - this is normal and allowed per Vacanti\n          data.push({\n            timestamp: endDate,\n            value: Math.round(value * 100) / 100, // Round to 2 decimal places\n            label: enhancedLabel,\n            // Add custom properties for tooltip enhancement\n            taskKey: taskKey,\n            taskName: taskName,\n            cycleTimeDays: value\n          } as DataPoint & { taskKey: string; taskName: string; cycleTimeDays: number });\n        } else {\n          // For throughput analysis, we'll count items completed per week\n          // This will be processed differently in a separate function\n        }\n\n        completedTasks.push({\n          taskKey,\n          taskName,\n          startDate,\n          endDate,\n          cycleTime: value,\n          status,\n          resolution\n        });\n        \n      } catch (error) {\n        console.warn(`Skipping row ${i} due to date parsing error:`, error);\n        filteredOutCount++;\n        continue;\n      }\n    }\n\n    if (data.length === 0) {\n      throw new Error('No completed tasks found that meet the criteria. PBC analysis requires completed work items (Done status/resolution) with start and end dates.');\n    }\n\n    // Sort by completion date for proper time series analysis (Vacanti's requirement)\n    data.sort((a, b) => a.timestamp.getTime() - b.timestamp.getTime());\n\n    // Calculate statistics including duplicate timestamps (which are allowed per Vacanti)\n    const cycleTimeValues = data.map(d => d.value);\n    const avgCycleTime = cycleTimeValues.reduce((sum, val) => sum + val, 0) / cycleTimeValues.length;\n    \n    // Count duplicate timestamps (for informational purposes)\n    const timestamps = data.map(d => d.timestamp.getTime());\n    const uniqueTimestamps = new Set(timestamps);\n    const duplicateTimestamps = timestamps.length - uniqueTimestamps.size;\n    \n    setPreview({\n      totalTasks: completedTasks.length + filteredOutCount,\n      completedTasks: completedTasks.length,\n      filteredOutTasks: filteredOutCount,\n      dateRange: {\n        start: new Date(Math.min(...data.map(d => d.timestamp.getTime()))),\n        end: new Date(Math.max(...data.map(d => d.timestamp.getTime())))\n      },\n      avgCycleTime,\n      duplicateTimestamps\n    });\n\n    return data;\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    setLoading(true);\n    setError(null);\n    setPreview(null);\n\n    try {\n      // Validate file type\n      if (!file.name.toLowerCase().endsWith('.csv')) {\n        throw new Error('Please upload a CSV file');\n      }\n\n      // Validate file size (32MB limit as per Nave documentation)\n      if (file.size > 32 * 1024 * 1024) {\n        throw new Error('File size exceeds 32MB limit');\n      }\n\n      const pbcData = await parseNaveCSV(file);\n      \n      // Validate minimum data points for meaningful PBC analysis\n      if (pbcData.length < 6) {\n        throw new Error(`Only ${pbcData.length} completed tasks found that meet the criteria. Minimum 6 data points required for meaningful Process Behaviour Chart analysis as per Vacanti's methodology.`);\n      }\n\n      onDataChange(pbcData);\n      \n    } catch (err: any) {\n      setError(err.message || 'Failed to parse Nave CSV file');\n      setPreview(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h6\" gutterBottom>\n        Upload Nave CSV File\n      </Typography>\n      \n      <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mb: 2 }}>\n        Upload a CSV file exported from Nave to analyze your flow metrics using Process Behaviour Charts.\n        Only completed tasks (Done status/resolution) will be included, excluding \"Won't fix\" items.\n      </Typography>\n\n      {/* Metric Type Selection */}\n      <FormControl fullWidth sx={{ mb: 2 }}>\n        <InputLabel>Flow Metric to Analyze</InputLabel>\n        <Select\n          value={selectedMetricType}\n          onChange={(e) => setSelectedMetricType(e.target.value as 'cycle_time' | 'throughput')}\n        >\n          <MenuItem value=\"cycle_time\">\n            Cycle Time (Days) - Time from start to completion\n          </MenuItem>\n          <MenuItem value=\"throughput\">\n            Throughput (Items/Week) - Items completed per time period\n          </MenuItem>\n        </Select>\n      </FormControl>\n\n      <Button\n        variant=\"outlined\"\n        component=\"label\"\n        startIcon={<CloudUpload />}\n        disabled={loading}\n        fullWidth\n        sx={{ mb: 2 }}\n      >\n        Choose Nave CSV File\n        <input\n          type=\"file\"\n          accept=\".csv,text/csv,application/csv\"\n          hidden\n          onChange={handleFileUpload}\n        />\n      </Button>\n\n      {loading && (\n        <Box sx={{ mb: 2 }}>\n          <LinearProgress />\n          <Typography variant=\"body2\" sx={{ mt: 1 }}>\n            Processing Nave data for flow metrics analysis...\n          </Typography>\n        </Box>\n      )}\n      \n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          <Typography variant=\"subtitle2\" gutterBottom>\n            Upload Error\n          </Typography>\n          {error}\n        </Alert>\n      )}\n\n      {preview && (\n        <Alert severity=\"success\" sx={{ mb: 2 }}>\n          <Typography variant=\"subtitle2\" gutterBottom>\n            <Assessment sx={{ mr: 1, verticalAlign: 'middle' }} />\n            Nave Data Successfully Processed\n          </Typography>\n          \n          <Stack direction=\"row\" spacing={1} sx={{ mb: 1, flexWrap: 'wrap' }}>\n            <Chip label={`${preview.completedTasks} completed tasks included`} size=\"small\" color=\"success\" />\n            <Chip label={`${preview.filteredOutTasks} tasks filtered out`} size=\"small\" color=\"info\" />\n            <Chip \n              label={`Avg ${metricType === 'cycle_time' ? 'Cycle Time' : 'Throughput'}: ${preview.avgCycleTime.toFixed(1)} ${metricType === 'cycle_time' ? 'days' : 'items/week'}`} \n              size=\"small\" \n            />\n            {preview.duplicateTimestamps > 0 && (\n              <Chip \n                label={`${preview.duplicateTimestamps} items completed on same day`} \n                size=\"small\" \n                color=\"info\"\n              />\n            )}\n          </Stack>\n          \n          <Typography variant=\"body2\">\n            Date range: {preview.dateRange.start.toLocaleDateString()} to {preview.dateRange.end.toLocaleDateString()}\n          </Typography>\n          \n          <Typography variant=\"body2\" sx={{ mt: 1 }}>\n            Ready for Process Behaviour Chart analysis. Data is chronologically ordered and meets \n            Vacanti's requirements for meaningful XmR chart analysis.\n          </Typography>\n          \n          <Typography variant=\"body2\" sx={{ mt: 1, fontStyle: 'italic' }}>\n            Filtered out: \"Won't fix\" status and non-\"Done\" resolutions as per your requirements.\n          </Typography>\n        </Alert>\n      )}\n\n      {/* Enhanced help text */}\n      <Box sx={{ mt: 2, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\n        <Typography variant=\"subtitle2\" gutterBottom>\n          Filtering Rules Applied:\n        </Typography>\n        <Typography variant=\"body2\" component=\"ul\" sx={{ pl: 2 }}>\n          <li>‚úÖ Include: Tasks with \"Done\" status or \"Done\" resolution</li>\n          <li>‚ùå Exclude: Tasks with \"Won't fix\" status</li>\n          <li>‚ùå Exclude: Tasks with non-\"Done\" resolutions</li>\n          <li>‚ùå Exclude: Tasks without completion dates</li>\n          <li>üìä Result: Only completed work items for accurate flow metrics</li>\n          <li>üéØ Hover over chart points to see Task Key and Task Name</li>\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n\nexport default FileUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}